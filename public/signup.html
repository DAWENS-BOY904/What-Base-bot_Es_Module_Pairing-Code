<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sign Up — DAWENS LEARN</title>
  <style>
    :root {
      --bg: #050505;
      --card-bg: rgba(25, 25, 25, 0.45);
      --border: rgba(255, 255, 255, 0.08);
      --muted: #9ba0b0;
      --accent: #6c63ff;
      --radius: 16px;
      --blur: 24px;
      --transition: all 0.4s ease;
      --glow: 0 0 18px var(--accent), 0 0 28px var(--accent);
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { width:100%; height:100%; font-family:"Poppins","Segoe UI",sans-serif; background:var(--bg); color:#fff; display:flex; justify-content:center; align-items:center; }
    .card { background:var(--card-bg); border:1px solid var(--border); backdrop-filter:blur(var(--blur)); padding:32px; width:92%; max-width:420px; border-radius:var(--radius); box-shadow:0 0 40px rgba(0,0,0,0.6), 0 0 15px var(--accent); }
    .logo { font-size:2.5rem; font-weight:800; color:var(--accent); text-align:center; margin-bottom:8px; text-shadow:var(--glow); }
    .header-title { text-align:center; font-weight:600; font-size:1.3rem; }
    label { font-weight:500; display:block; margin-bottom:4px; color:#ddd; }
    input { width:100%; padding:10px 12px; border-radius:8px; border:1px solid var(--border); background:rgba(255,255,255,0.06); color:#fff; outline:none; margin-bottom:12px; transition:0.3s; }
    input:focus { border-color:var(--accent); box-shadow:0 0 10px var(--accent); }
    .primary { width:100%; background:var(--accent); color:#fff; border:none; padding:12px; border-radius:8px; font-size:1rem; cursor:pointer; transition:0.3s; font-weight:600; }
    .primary:hover { filter:brightness(1.2); box-shadow:0 0 20px var(--accent); }
    .oauth-row { display:flex; justify-content:center; gap:12px; margin-top:12px; }
    .oauth { padding:8px 18px; border:1px solid var(--accent); border-radius:8px; text-decoration:none; color:var(--accent); font-weight:500; transition:0.3s; }
    .oauth:hover { background:var(--accent); color:#000; box-shadow:0 0 20px var(--accent); }
    .footer { text-align:center; margin-top:20px; font-size:0.8rem; color:var(--muted); border-top:1px solid rgba(255,255,255,0.05); padding-top:8px; }
    .small { font-size:0.9rem; text-align:center; color:var(--muted); margin-bottom:12px; }
  </style>
  <link rel="icon" href="https://files.catbox.moe/x16nfd.png">
</head>
<body>
  <div class="card">
    <div class="logo">DL</div>
    <h2 class="header-title">Create Account — DAWENS LEARN</h2>
    <p class="small">Sign up to start your learning journey</p>

    <form id="signupForm">
      <label>Email</label>
      <input type="email" name="email" placeholder="you@gmail.com" required />

      <label>Password</label>
      <input type="password" name="password" placeholder="Enter your password" required />

      <label>Confirm Password</label>
      <input type="password" name="confirm" placeholder="Confirm password" required />

      <button class="primary" type="submit">Sign Up</button>
      <div id="signupMsg" class="small"></div>
    </form>

    <div style="margin-top:12px; text-align:center" class="small">Or sign up with</div>
    <div class="oauth-row">
      <a class="oauth" href="/auth/google" title="Sign up with Google">Google</a>
      <a class="oauth" href="/auth/github" title="Sign up with GitHub">GitHub</a>
    </div>

    <p class="small" style="margin-top:12px;">Already have an account? <a href="/login.html" style="color:#9dbff0;text-decoration:none">Login</a></p>

    <div class="footer">
      <div>Owner: DAWENS BOY TECH</div>
      <div>Email: berryxoe@gmail.com • Phone: +50942241547</div>
    </div>
  </div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const signupForm = document.getElementById("signupForm");
  const signupMsg = document.getElementById("signupMsg");

  signupForm.addEventListener("submit", async (e) => {
    e.preventDefault();

    const email = signupForm.email.value.trim();
    const password = signupForm.password.value.trim();
    const confirm = signupForm.confirm.value.trim();

    if (!email || !password || !confirm) {
      signupMsg.textContent = "⚠️ Please fill in all fields!";
      signupMsg.style.color = "#ffbf00";
      return;
    }

    if (password !== confirm) {
      signupMsg.textContent = "⚠️ Passwords do not match!";
      signupMsg.style.color = "#ff4b2b";
      return;
    }

    try {
      const res = await fetch("/api/signup", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email, password })
      });

      const json = await res.json();

      if (json.ok) {
        signupMsg.textContent = "✅ Account created! Redirecting to login...";
        signupMsg.style.color = "#39ff14";
        setTimeout(() => { window.location.href = "/login.html"; }, 1200);
      } else {
        signupMsg.textContent = json.error || "⚠️ Signup failed";
        signupMsg.style.color = "#ff4b2b";
      }
    } catch(err) {
      console.error(err);
      signupMsg.textContent = "❌ Server error";
      signupMsg.style.color = "#ff4b2b";
    }
  });
});
</script>
</body>
</html>
